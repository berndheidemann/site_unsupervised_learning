<!doctype html><html lang=de class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://berndheidemann.github.io/site_unsupervised_learning/arbeitsblaetter/ul-08-weinqualitaet/ rel=canonical><link href=../ul-07-kundensegmentierung/ rel=prev><link href=../ul-09-musik-clustering/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>UL-08 Weinqualität - Unsupervised Learning</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/css/pdf-viewer.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#ul-08-weinqualitat-analyse class=md-skip> Zum Inhalt </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Kopfzeile> <a href=../.. title="Unsupervised Learning" class="md-header__button md-logo" aria-label="Unsupervised Learning" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Unsupervised Learning </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> UL-08 Weinqualität </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=orange aria-label="Zu Dark Mode wechseln" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Zu Dark Mode wechseln" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=orange aria-label="Zu Light Mode wechseln" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Zu Light Mode wechseln" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Suche placeholder=Suche autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Suche> <button type=reset class="md-search__icon md-icon" title=Zurücksetzen aria-label=Zurücksetzen tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Suche wird initialisiert </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Hauptnavigation data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Start </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ul-01-einfuehrung/ class=md-tabs__link> Arbeitsblätter </a> </li> <li class=md-tabs__item> <a href=../../infoblaetter/einfuehrung-unsupervised/ class=md-tabs__link> Infoblätter </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Unsupervised Learning" class="md-nav__button md-logo" aria-label="Unsupervised Learning" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Unsupervised Learning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Start </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Arbeitsblätter </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Arbeitsblätter </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex> <span class=md-ellipsis> Phase 1 - Einführung </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Phase 1 - Einführung </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ul-01-einfuehrung/ class=md-nav__link> <span class=md-ellipsis> UL-01 Einführung </span> </a> </li> <li class=md-nav__item> <a href=../ul-02-vorverarbeitung/ class=md-nav__link> <span class=md-ellipsis> UL-02 Vorverarbeitung </span> </a> </li> <li class=md-nav__item> <a href=../ul-03-kmeans/ class=md-nav__link> <span class=md-ellipsis> UL-03 K-Means </span> </a> </li> <li class=md-nav__item> <a href=../ul-04-pca/ class=md-nav__link> <span class=md-ellipsis> UL-04 PCA </span> </a> </li> <li class=md-nav__item> <a href=../ul-05-interpretation/ class=md-nav__link> <span class=md-ellipsis> UL-05 Interpretation </span> </a> </li> <li class=md-nav__item> <a href=../ul-06-hierarchisch/ class=md-nav__link> <span class=md-ellipsis> UL-06 Hierarchisch </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex> <span class=md-ellipsis> Phase 2 - Anwendung </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Phase 2 - Anwendung </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ul-07-kundensegmentierung/ class=md-nav__link> <span class=md-ellipsis> UL-07 Kundensegmentierung </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> Phase 3 - Vertiefung </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Phase 3 - Vertiefung </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> UL-08 Weinqualität </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> UL-08 Weinqualität </span> </a> <nav class="md-nav md-nav--secondary" aria-label=Inhaltsverzeichnis> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Inhaltsverzeichnis </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#lernziele class=md-nav__link> <span class=md-ellipsis> Lernziele </span> </a> </li> <li class=md-nav__item> <a href=#das-szenario class=md-nav__link> <span class=md-ellipsis> Das Szenario </span> </a> </li> <li class=md-nav__item> <a href=#der-datensatz class=md-nav__link> <span class=md-ellipsis> Der Datensatz </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-1-daten-laden-und-vorbereiten class=md-nav__link> <span class=md-ellipsis> Aufgabe 1: Daten laden und vorbereiten </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-2-feature-korrelationen-analysieren class=md-nav__link> <span class=md-ellipsis> Aufgabe 2: Feature-Korrelationen analysieren </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-3-feature-auswahl-treffen class=md-nav__link> <span class=md-ellipsis> Aufgabe 3: Feature-Auswahl treffen </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-4-clustering-mit-k-means class=md-nav__link> <span class=md-ellipsis> Aufgabe 4: Clustering mit K-Means </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-5-hierarchisches-clustering class=md-nav__link> <span class=md-ellipsis> Aufgabe 5: Hierarchisches Clustering </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-6-algorithmen-vergleichen class=md-nav__link> <span class=md-ellipsis> Aufgabe 6: Algorithmen vergleichen </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-7-cluster-profile-erstellen class=md-nav__link> <span class=md-ellipsis> Aufgabe 7: Cluster-Profile erstellen </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-8-cluster-mit-qualitat-vergleichen class=md-nav__link> <span class=md-ellipsis> Aufgabe 8: Cluster mit Qualität vergleichen </span> </a> </li> <li class=md-nav__item> <a href=#zusatzaufgabe-dbscan-ausprobieren class=md-nav__link> <span class=md-ellipsis> Zusatzaufgabe: DBSCAN ausprobieren </span> </a> </li> <li class=md-nav__item> <a href=#haufige-fehler class=md-nav__link> <span class=md-ellipsis> Häufige Fehler </span> </a> </li> <li class=md-nav__item> <a href=#zusammenfassung class=md-nav__link> <span class=md-ellipsis> Zusammenfassung </span> </a> </li> <li class=md-nav__item> <a href=#nachste-schritte class=md-nav__link> <span class=md-ellipsis> Nächste Schritte </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex> <span class=md-ellipsis> Phase 4 - Projekt </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Phase 4 - Projekt </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ul-09-musik-clustering/ class=md-nav__link> <span class=md-ellipsis> UL-09 Musik-Clustering </span> </a> </li> <li class=md-nav__item> <a href=../ul-10-abschlussprojekt/ class=md-nav__link> <span class=md-ellipsis> UL-10 Abschlussprojekt </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex> <span class=md-ellipsis> Optional </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Optional </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ul-opt-01-kreditkarten/ class=md-nav__link> <span class=md-ellipsis> UL-OPT-01 Kreditkarten </span> </a> </li> <li class=md-nav__item> <a href=../ul-opt-02-big-data/ class=md-nav__link> <span class=md-ellipsis> UL-OPT-02 Big Data </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Infoblätter </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Infoblätter </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../infoblaetter/einfuehrung-unsupervised/ class=md-nav__link> <span class=md-ellipsis> I-01 Einführung UL </span> </a> </li> <li class=md-nav__item> <a href=../../infoblaetter/datenvorverarbeitung/ class=md-nav__link> <span class=md-ellipsis> I-02 Vorverarbeitung </span> </a> </li> <li class=md-nav__item> <a href=../../infoblaetter/kmeans-clustering/ class=md-nav__link> <span class=md-ellipsis> I-03 K-Means </span> </a> </li> <li class=md-nav__item> <a href=../../infoblaetter/hierarchisches-clustering/ class=md-nav__link> <span class=md-ellipsis> I-04 Hierarchisch </span> </a> </li> <li class=md-nav__item> <a href=../../infoblaetter/pca-dimensionsreduktion/ class=md-nav__link> <span class=md-ellipsis> I-05 PCA </span> </a> </li> <li class=md-nav__item> <a href=../../infoblaetter/weitere-algorithmen/ class=md-nav__link> <span class=md-ellipsis> I-06 Weitere Algorithmen </span> </a> </li> <li class=md-nav__item> <a href=../../infoblaetter/cluster-evaluation/ class=md-nav__link> <span class=md-ellipsis> I-07 Evaluation </span> </a> </li> <li class=md-nav__item> <a href=../../infoblaetter/grosse-datenmengen/ class=md-nav__link> <span class=md-ellipsis> I-08 Große Datenmengen </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Inhaltsverzeichnis> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Inhaltsverzeichnis </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#lernziele class=md-nav__link> <span class=md-ellipsis> Lernziele </span> </a> </li> <li class=md-nav__item> <a href=#das-szenario class=md-nav__link> <span class=md-ellipsis> Das Szenario </span> </a> </li> <li class=md-nav__item> <a href=#der-datensatz class=md-nav__link> <span class=md-ellipsis> Der Datensatz </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-1-daten-laden-und-vorbereiten class=md-nav__link> <span class=md-ellipsis> Aufgabe 1: Daten laden und vorbereiten </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-2-feature-korrelationen-analysieren class=md-nav__link> <span class=md-ellipsis> Aufgabe 2: Feature-Korrelationen analysieren </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-3-feature-auswahl-treffen class=md-nav__link> <span class=md-ellipsis> Aufgabe 3: Feature-Auswahl treffen </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-4-clustering-mit-k-means class=md-nav__link> <span class=md-ellipsis> Aufgabe 4: Clustering mit K-Means </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-5-hierarchisches-clustering class=md-nav__link> <span class=md-ellipsis> Aufgabe 5: Hierarchisches Clustering </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-6-algorithmen-vergleichen class=md-nav__link> <span class=md-ellipsis> Aufgabe 6: Algorithmen vergleichen </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-7-cluster-profile-erstellen class=md-nav__link> <span class=md-ellipsis> Aufgabe 7: Cluster-Profile erstellen </span> </a> </li> <li class=md-nav__item> <a href=#aufgabe-8-cluster-mit-qualitat-vergleichen class=md-nav__link> <span class=md-ellipsis> Aufgabe 8: Cluster mit Qualität vergleichen </span> </a> </li> <li class=md-nav__item> <a href=#zusatzaufgabe-dbscan-ausprobieren class=md-nav__link> <span class=md-ellipsis> Zusatzaufgabe: DBSCAN ausprobieren </span> </a> </li> <li class=md-nav__item> <a href=#haufige-fehler class=md-nav__link> <span class=md-ellipsis> Häufige Fehler </span> </a> </li> <li class=md-nav__item> <a href=#zusammenfassung class=md-nav__link> <span class=md-ellipsis> Zusammenfassung </span> </a> </li> <li class=md-nav__item> <a href=#nachste-schritte class=md-nav__link> <span class=md-ellipsis> Nächste Schritte </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=ul-08-weinqualitat-analyse>UL-08: Weinqualität-Analyse<a class=headerlink href=#ul-08-weinqualitat-analyse title="Permanent link">&para;</a></h1> <div class="admonition abstract"> <p class=admonition-title>Advance Organizer</p> <p>Mehr Features bedeuten mehr Komplexität: Welche Features sind wichtig? Welche sind redundant? Hier lernst du, mit höherdimensionalen Daten umzugehen und verschiedene Algorithmen systematisch zu vergleichen. Außerdem begegnest du zum ersten Mal dem Silhouette Score als objektive Bewertungsmetrik.</p> <p><strong>Dein Ziel:</strong> Du kannst Feature-Korrelationen analysieren, Algorithmen vergleichen und deine Entscheidungen mit Metriken begründen.</p> </div> <hr> <h2 id=lernziele>Lernziele<a class=headerlink href=#lernziele title="Permanent link">&para;</a></h2> <p>Nach Bearbeitung dieses Arbeitsblatts kannst du:</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> Mit mehr Features arbeiten (11 statt 5)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> Feature-Korrelationen verstehen und nutzen</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> Verschiedene Algorithmen systematisch vergleichen</li> </ul> <hr> <h2 id=das-szenario>Das Szenario<a class=headerlink href=#das-szenario title="Permanent link">&para;</a></h2> <div class="admonition example"> <p class=admonition-title>Ausgangssituation</p> <p>Ein Weinhändler möchte sein Sortiment besser strukturieren. Statt nach Herkunftsregion oder Preis will er Weine nach ihren chemischen Eigenschaften gruppieren. So kann er ähnliche Weine zusammen vermarkten und Kunden passende Alternativen empfehlen.</p> <p><strong>Deine Aufgabe:</strong> Finde Gruppen von Weinen mit ähnlichen Eigenschaften.</p> </div> <hr> <h2 id=der-datensatz>Der Datensatz<a class=headerlink href=#der-datensatz title="Permanent link">&para;</a></h2> <p>Der <strong>Wine Quality</strong> Datensatz enthält chemische Analysen von portugiesischem Wein (rot und weiß):</p> <table> <thead> <tr> <th>Feature</th> <th>Beschreibung</th> </tr> </thead> <tbody> <tr> <td>fixed acidity</td> <td>Feste Säuren (g/l)</td> </tr> <tr> <td>volatile acidity</td> <td>Flüchtige Säuren (g/l)</td> </tr> <tr> <td>citric acid</td> <td>Zitronensäure (g/l)</td> </tr> <tr> <td>residual sugar</td> <td>Restzucker (g/l)</td> </tr> <tr> <td>chlorides</td> <td>Chloride (g/l)</td> </tr> <tr> <td>free sulfur dioxide</td> <td>Freies Schwefeldioxid (mg/l)</td> </tr> <tr> <td>total sulfur dioxide</td> <td>Gesamtes Schwefeldioxid (mg/l)</td> </tr> <tr> <td>density</td> <td>Dichte (g/ml)</td> </tr> <tr> <td>pH</td> <td>pH-Wert</td> </tr> <tr> <td>sulphates</td> <td>Sulfate (g/l)</td> </tr> <tr> <td>alcohol</td> <td>Alkoholgehalt (%)</td> </tr> <tr> <td>quality</td> <td>Qualitätsbewertung (0-10)</td> </tr> </tbody> </table> <hr> <h2 id=aufgabe-1-daten-laden-und-vorbereiten>Aufgabe 1: Daten laden und vorbereiten<a class=headerlink href=#aufgabe-1-daten-laden-und-vorbereiten title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=kn>import</span><span class=w> </span><span class=nn>matplotlib.pyplot</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>plt</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=kn>import</span><span class=w> </span><span class=nn>seaborn</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>sns</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.preprocessing</span><span class=w> </span><span class=kn>import</span> <span class=n>StandardScaler</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=c1># Wine Quality Datensätze laden</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=c1># Option 1: Nur Rotwein</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=n>df_red</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;winequality-red.csv&#39;</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s1>&#39;;&#39;</span><span class=p>)</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=n>df_red</span><span class=p>[</span><span class=s1>&#39;type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;red&#39;</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=c1># Option 2: Nur Weißwein</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=n>df_white</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;winequality-white.csv&#39;</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s1>&#39;;&#39;</span><span class=p>)</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=n>df_white</span><span class=p>[</span><span class=s1>&#39;type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;white&#39;</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=c1># Option 3: Beide zusammen</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>concat</span><span class=p>([</span><span class=n>df_red</span><span class=p>,</span> <span class=n>df_white</span><span class=p>],</span> <span class=n>ignore_index</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Rotwein: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>df_red</span><span class=p>)</span><span class=si>}</span><span class=s2> Proben&quot;</span><span class=p>)</span>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Weißwein: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>df_white</span><span class=p>)</span><span class=si>}</span><span class=s2> Proben&quot;</span><span class=p>)</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Gesamt: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>df</span><span class=p>)</span><span class=si>}</span><span class=s2> Proben&quot;</span><span class=p>)</span>
</code></pre></div> <p><strong>Deine ersten Beobachtungen:</strong></p> <p>a) Wie viele Rot- und wie viele Weißweine gibt es? Ist das Verhältnis ausgeglichen?</p> <p>b) Prüfe mit <code>df.info()</code> und <code>df.describe()</code>: Gibt es fehlende Werte? Gibt es Auffälligkeiten in den Wertebereichen?</p> <p><strong>Entscheidung:</strong> Analysierst du Rot- und Weißwein zusammen oder getrennt? Begründe!</p> <div class="admonition tip"> <p class=admonition-title>Tipp</p> <p>Für den Anfang empfehle ich, mit Rotwein zu starten (weniger Daten, schnelleres Experimentieren).</p> </div> <hr> <h2 id=aufgabe-2-feature-korrelationen-analysieren>Aufgabe 2: Feature-Korrelationen analysieren<a class=headerlink href=#aufgabe-2-feature-korrelationen-analysieren title="Permanent link">&para;</a></h2> <p>Bei 11 Features ist es wichtig, Redundanzen zu erkennen:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># Korrelationsmatrix</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=n>features</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>select_dtypes</span><span class=p>(</span><span class=n>include</span><span class=o>=</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>number</span><span class=p>])</span><span class=o>.</span><span class=n>columns</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=s1>&#39;quality&#39;</span><span class=p>)</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=n>corr</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>features</span><span class=p>]</span><span class=o>.</span><span class=n>corr</span><span class=p>()</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=c1># Heatmap</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>10</span><span class=p>))</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=n>sns</span><span class=o>.</span><span class=n>heatmap</span><span class=p>(</span><span class=n>corr</span><span class=p>,</span> <span class=n>annot</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>cmap</span><span class=o>=</span><span class=s1>&#39;coolwarm&#39;</span><span class=p>,</span> <span class=n>center</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>fmt</span><span class=o>=</span><span class=s1>&#39;.2f&#39;</span><span class=p>)</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Feature-Korrelationen&#39;</span><span class=p>)</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=c1># Stark korrelierte Feature-Paare finden (|r| &gt; 0.7)</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=n>high_corr</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>corr</span><span class=p>)):</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>corr</span><span class=p>)):</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>        <span class=k>if</span> <span class=nb>abs</span><span class=p>(</span><span class=n>corr</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>])</span> <span class=o>&gt;</span> <span class=mf>0.7</span><span class=p>:</span>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>            <span class=n>high_corr</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>corr</span><span class=o>.</span><span class=n>index</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>corr</span><span class=o>.</span><span class=n>columns</span><span class=p>[</span><span class=n>j</span><span class=p>],</span> <span class=n>corr</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>]))</span>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>
<a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Stark korrelierte Features:&quot;</span><span class=p>)</span>
<a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a><span class=k>for</span> <span class=n>f1</span><span class=p>,</span> <span class=n>f2</span><span class=p>,</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>high_corr</span><span class=p>:</span>
<a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;  </span><span class=si>{</span><span class=n>f1</span><span class=si>}</span><span class=s2> &lt;-&gt; </span><span class=si>{</span><span class=n>f2</span><span class=si>}</span><span class=s2>: r = </span><span class=si>{</span><span class=n>r</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <p><strong>Fragen:</strong></p> <p>a) Welche Features sind stark korreliert?</p> <p>b) Sollte man beide behalten oder eines entfernen? Begründe!</p> <hr> <h2 id=aufgabe-3-feature-auswahl-treffen>Aufgabe 3: Feature-Auswahl treffen<a class=headerlink href=#aufgabe-3-feature-auswahl-treffen title="Permanent link">&para;</a></h2> <p>Entscheide, welche Features du für das Clustering verwendest:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># Welche Option wählst du? Begründe deine Entscheidung!</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=c1># Option A: Alle Features</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=c1># Option B: Hoch korrelierte entfernen </span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=c1># Option C: PCA zur Reduktion nutzen</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1># Trage deine Auswahl ein (Beispiel - passe nach deiner Analyse an!):</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=n>selected_features</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;fixed acidity&#39;</span><span class=p>,</span> <span class=s1>&#39;volatile acidity&#39;</span><span class=p>,</span> <span class=s1>&#39;citric acid&#39;</span><span class=p>,</span> 
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>                     <span class=s1>&#39;residual sugar&#39;</span><span class=p>,</span> <span class=s1>&#39;chlorides&#39;</span><span class=p>,</span> <span class=s1>&#39;free sulfur dioxide&#39;</span><span class=p>,</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>                     <span class=s1>&#39;density&#39;</span><span class=p>,</span> <span class=s1>&#39;pH&#39;</span><span class=p>,</span> <span class=s1>&#39;sulphates&#39;</span><span class=p>,</span> <span class=s1>&#39;alcohol&#39;</span><span class=p>]</span>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=n>X</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>selected_features</span><span class=p>]</span>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Verwendete Features: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>selected_features</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=nb>print</span><span class=p>(</span><span class=n>selected_features</span><span class=p>)</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=c1># Skalieren</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=n>scaler</span> <span class=o>=</span> <span class=n>StandardScaler</span><span class=p>()</span>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=n>X_scaled</span> <span class=o>=</span> <span class=n>scaler</span><span class=o>.</span><span class=n>fit_transform</span><span class=p>(</span><span class=n>X</span><span class=p>)</span>
</code></pre></div> <p><strong>Begründung deiner Auswahl:</strong> (schreibe 2-3 Sätze)</p> <hr> <h2 id=aufgabe-4-clustering-mit-k-means>Aufgabe 4: Clustering mit K-Means<a class=headerlink href=#aufgabe-4-clustering-mit-k-means title="Permanent link">&para;</a></h2> <p>Führe die Elbow- und Silhouette-Analyse selbstständig durch:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.cluster</span><span class=w> </span><span class=kn>import</span> <span class=n>KMeans</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.metrics</span><span class=w> </span><span class=kn>import</span> <span class=n>silhouette_score</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=c1># Erstelle Listen für die Ergebnisse</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=n>results</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=n>K_range</span> <span class=o>=</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=c1># Implementiere die Schleife selbst!</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=c1># Für jedes k:</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=c1>#   1. Erstelle KMeans-Modell</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=c1>#   2. Trainiere und hole Labels</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=c1>#   3. Berechne Silhouette Score</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=c1>#   4. Speichere Ergebnisse</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>K_range</span><span class=p>:</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>    <span class=n>kmeans</span> <span class=o>=</span> <span class=n>KMeans</span><span class=p>(</span><span class=n>n_clusters</span><span class=o>=</span><span class=n>k</span><span class=p>,</span> <span class=n>random_state</span><span class=o>=</span><span class=mi>42</span><span class=p>,</span> <span class=n>n_init</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>    <span class=n>labels</span> <span class=o>=</span> <span class=n>kmeans</span><span class=o>.</span><span class=n>fit_predict</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>)</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a>    <span class=n>sil</span> <span class=o>=</span> <span class=n>silhouette_score</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>,</span> <span class=n>labels</span><span class=p>)</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a>    <span class=n>results</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a>        <span class=s1>&#39;k&#39;</span><span class=p>:</span> <span class=n>k</span><span class=p>,</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a>        <span class=s1>&#39;inertia&#39;</span><span class=p>:</span> <span class=n>kmeans</span><span class=o>.</span><span class=n>inertia_</span><span class=p>,</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a>        <span class=s1>&#39;silhouette&#39;</span><span class=p>:</span> <span class=n>sil</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a>    <span class=p>})</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a>
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=c1># Visualisierung (diesen Teil kannst du so übernehmen)</span>
<a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=n>results_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>results</span><span class=p>)</span>
<a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a>
<a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a><span class=n>fig</span><span class=p>,</span> <span class=n>axes</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>4</span><span class=p>))</span>
<a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a>
<a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a><span class=n>axes</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>results_df</span><span class=p>[</span><span class=s1>&#39;k&#39;</span><span class=p>],</span> <span class=n>results_df</span><span class=p>[</span><span class=s1>&#39;inertia&#39;</span><span class=p>],</span> <span class=s1>&#39;bo-&#39;</span><span class=p>)</span>
<a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a><span class=n>axes</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Anzahl Cluster&#39;</span><span class=p>)</span>
<a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a><span class=n>axes</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Inertia&#39;</span><span class=p>)</span>
<a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a><span class=n>axes</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s1>&#39;Elbow-Methode&#39;</span><span class=p>)</span>
<a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a>
<a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a><span class=n>axes</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>bar</span><span class=p>(</span><span class=n>results_df</span><span class=p>[</span><span class=s1>&#39;k&#39;</span><span class=p>],</span> <span class=n>results_df</span><span class=p>[</span><span class=s1>&#39;silhouette&#39;</span><span class=p>],</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;steelblue&#39;</span><span class=p>)</span>
<a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a><span class=n>axes</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_xlabel</span><span class=p>(</span><span class=s1>&#39;Anzahl Cluster&#39;</span><span class=p>)</span>
<a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a><span class=n>axes</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_ylabel</span><span class=p>(</span><span class=s1>&#39;Silhouette Score&#39;</span><span class=p>)</span>
<a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a><span class=n>axes</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>set_title</span><span class=p>(</span><span class=s1>&#39;Silhouette-Analyse&#39;</span><span class=p>)</span>
<a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a>
<a id=__codelineno-3-40 name=__codelineno-3-40 href=#__codelineno-3-40></a><span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
<a id=__codelineno-3-41 name=__codelineno-3-41 href=#__codelineno-3-41></a><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
<a id=__codelineno-3-42 name=__codelineno-3-42 href=#__codelineno-3-42></a>
<a id=__codelineno-3-43 name=__codelineno-3-43 href=#__codelineno-3-43></a><span class=nb>print</span><span class=p>(</span><span class=n>results_df</span><span class=p>)</span>
</code></pre></div> <p><strong>Analysiere die Ergebnisse:</strong></p> <p>a) Bei welchem k liegt der "Ellbogen"?</p> <p>b) Bei welchem k ist der Silhouette Score am höchsten?</p> <p>c) Welches k wählst du? Begründe!</p> <hr> <h2 id=aufgabe-5-hierarchisches-clustering>Aufgabe 5: Hierarchisches Clustering<a class=headerlink href=#aufgabe-5-hierarchisches-clustering title="Permanent link">&para;</a></h2> <p>Vergleiche mit hierarchischem Clustering:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.cluster</span><span class=w> </span><span class=kn>import</span> <span class=n>AgglomerativeClustering</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=kn>from</span><span class=w> </span><span class=nn>scipy.cluster.hierarchy</span><span class=w> </span><span class=kn>import</span> <span class=n>dendrogram</span><span class=p>,</span> <span class=n>linkage</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=c1># Linkage berechnen</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=n>Z</span> <span class=o>=</span> <span class=n>linkage</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>,</span> <span class=n>method</span><span class=o>=</span><span class=s1>&#39;ward&#39;</span><span class=p>)</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=c1># Dendrogramm (bei vielen Daten truncated)</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>14</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=n>dendrogram</span><span class=p>(</span><span class=n>Z</span><span class=p>,</span> <span class=n>truncate_mode</span><span class=o>=</span><span class=s1>&#39;lastp&#39;</span><span class=p>,</span> <span class=n>p</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Dendrogramm (Ward-Linkage)&#39;</span><span class=p>)</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Cluster&#39;</span><span class=p>)</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s1>&#39;Distanz&#39;</span><span class=p>)</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=c1># AgglomerativeClustering</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=n>agg</span> <span class=o>=</span> <span class=n>AgglomerativeClustering</span><span class=p>(</span><span class=n>n_clusters</span><span class=o>=</span><span class=mi>4</span><span class=p>,</span> <span class=n>linkage</span><span class=o>=</span><span class=s1>&#39;ward&#39;</span><span class=p>)</span>  <span class=c1># Passe k an!</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=n>labels_hc</span> <span class=o>=</span> <span class=n>agg</span><span class=o>.</span><span class=n>fit_predict</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>)</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Hierarchisches Clustering:&quot;</span><span class=p>)</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=nb>print</span><span class=p>(</span><span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=n>labels_hc</span><span class=p>)</span><span class=o>.</span><span class=n>value_counts</span><span class=p>()</span><span class=o>.</span><span class=n>sort_index</span><span class=p>())</span>
</code></pre></div> <p><strong>Analysiere das Dendrogramm:</strong></p> <p>a) Bei welcher Distanz würde das Dendrogramm in 3, 4 oder 5 Cluster zerfallen?</p> <p>b) Gibt es einen "natürlichen" Schnitt, wo die Distanz plötzlich stark ansteigt?</p> <p>c) Stimmt deine Wahl von k mit dem Dendrogramm überein?</p> <hr> <h2 id=aufgabe-6-algorithmen-vergleichen>Aufgabe 6: Algorithmen vergleichen<a class=headerlink href=#aufgabe-6-algorithmen-vergleichen title="Permanent link">&para;</a></h2> <p>Vergleiche K-Means mit hierarchischem Clustering:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Dein gewähltes k aus der Analyse:</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=n>k_optimal</span> <span class=o>=</span> <span class=mi>4</span>  <span class=c1># Passe nach deiner Analyse an!</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=c1># K-Means</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=n>kmeans</span> <span class=o>=</span> <span class=n>KMeans</span><span class=p>(</span><span class=n>n_clusters</span><span class=o>=</span><span class=n>k_optimal</span><span class=p>,</span> <span class=n>random_state</span><span class=o>=</span><span class=mi>42</span><span class=p>,</span> <span class=n>n_init</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=n>labels_km</span> <span class=o>=</span> <span class=n>kmeans</span><span class=o>.</span><span class=n>fit_predict</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>)</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=c1># Hierarchisches Clustering</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.cluster</span><span class=w> </span><span class=kn>import</span> <span class=n>AgglomerativeClustering</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=n>agg</span> <span class=o>=</span> <span class=n>AgglomerativeClustering</span><span class=p>(</span><span class=n>n_clusters</span><span class=o>=</span><span class=n>k_optimal</span><span class=p>,</span> <span class=n>linkage</span><span class=o>=</span><span class=s1>&#39;ward&#39;</span><span class=p>)</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=n>labels_hc</span> <span class=o>=</span> <span class=n>agg</span><span class=o>.</span><span class=n>fit_predict</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>)</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=c1># Silhouette Scores vergleichen</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=n>sil_km</span> <span class=o>=</span> <span class=n>silhouette_score</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>,</span> <span class=n>labels_km</span><span class=p>)</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=n>sil_hc</span> <span class=o>=</span> <span class=n>silhouette_score</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>,</span> <span class=n>labels_hc</span><span class=p>)</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Silhouette Score:&quot;</span><span class=p>)</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;  K-Means:      </span><span class=si>{</span><span class=n>sil_km</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;  Hierarchisch: </span><span class=si>{</span><span class=n>sil_hc</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <p><strong>Fragen:</strong></p> <p>a) Welcher Algorithmus liefert den höheren Silhouette Score?</p> <p>b) Wie stark stimmen die Ergebnisse überein? (Nutze <code>adjusted_rand_score</code>)</p> <hr> <h2 id=aufgabe-7-cluster-profile-erstellen>Aufgabe 7: Cluster-Profile erstellen<a class=headerlink href=#aufgabe-7-cluster-profile-erstellen title="Permanent link">&para;</a></h2> <p>Analysiere, was die Cluster charakterisiert:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># K-Means Labels verwenden</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=n>df</span><span class=p>[</span><span class=s1>&#39;Cluster&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>labels_km</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=c1># Cluster-Profile</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=n>cluster_means</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;Cluster&#39;</span><span class=p>)[</span><span class=n>selected_features</span><span class=p>]</span><span class=o>.</span><span class=n>mean</span><span class=p>()</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=c1># Heatmap</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>14</span><span class=p>,</span> <span class=mi>8</span><span class=p>))</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=c1># Normalisieren für bessere Visualisierung</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=n>cluster_means_norm</span> <span class=o>=</span> <span class=p>(</span><span class=n>cluster_means</span> <span class=o>-</span> <span class=n>cluster_means</span><span class=o>.</span><span class=n>mean</span><span class=p>())</span> <span class=o>/</span> <span class=n>cluster_means</span><span class=o>.</span><span class=n>std</span><span class=p>()</span>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=n>sns</span><span class=o>.</span><span class=n>heatmap</span><span class=p>(</span><span class=n>cluster_means_norm</span><span class=o>.</span><span class=n>T</span><span class=p>,</span> <span class=n>annot</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>cmap</span><span class=o>=</span><span class=s1>&#39;RdYlGn&#39;</span><span class=p>,</span> <span class=n>center</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>fmt</span><span class=o>=</span><span class=s1>&#39;.2f&#39;</span><span class=p>)</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Cluster-Profile (Z-Score normalisiert)&#39;</span><span class=p>)</span>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Cluster&#39;</span><span class=p>)</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=n>plt</span><span class=o>.</span><span class=n>tight_layout</span><span class=p>()</span>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</code></pre></div> <p><strong>Analyse:</strong></p> <p>Welche Eigenschaften zeichnen die verschiedenen Cluster aus?</p> <table> <thead> <tr> <th>Cluster</th> <th>Charakteristik</th> </tr> </thead> <tbody> <tr> <td>0</td> <td><strong><em>_</em></strong><strong><em>_</em></strong>_</td> </tr> <tr> <td>1</td> <td><strong><em>_</em></strong><strong><em>_</em></strong>_</td> </tr> <tr> <td>2</td> <td><strong><em>_</em></strong><strong><em>_</em></strong>_</td> </tr> <tr> <td>3</td> <td><strong><em>_</em></strong><strong><em>_</em></strong>_</td> </tr> </tbody> </table> <hr> <h2 id=aufgabe-8-cluster-mit-qualitat-vergleichen>Aufgabe 8: Cluster mit Qualität vergleichen<a class=headerlink href=#aufgabe-8-cluster-mit-qualitat-vergleichen title="Permanent link">&para;</a></h2> <p>Die Variable <code>quality</code> ist ein Label, das wir nicht fürs Clustering genutzt haben. Prüfe, ob es einen Zusammenhang gibt:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># Qualitätsverteilung pro Cluster</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>(</span><span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>6</span><span class=p>))</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=n>df</span><span class=o>.</span><span class=n>boxplot</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=s1>&#39;quality&#39;</span><span class=p>,</span> <span class=n>by</span><span class=o>=</span><span class=s1>&#39;Cluster&#39;</span><span class=p>)</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=n>plt</span><span class=o>.</span><span class=n>title</span><span class=p>(</span><span class=s1>&#39;Weinqualität pro Cluster&#39;</span><span class=p>)</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=n>plt</span><span class=o>.</span><span class=n>suptitle</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=n>plt</span><span class=o>.</span><span class=n>xlabel</span><span class=p>(</span><span class=s1>&#39;Cluster&#39;</span><span class=p>)</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=n>plt</span><span class=o>.</span><span class=n>ylabel</span><span class=p>(</span><span class=s1>&#39;Qualität&#39;</span><span class=p>)</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=c1># Durchschnittliche Qualität pro Cluster</span>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=nb>print</span><span class=p>(</span><span class=n>df</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;Cluster&#39;</span><span class=p>)[</span><span class=s1>&#39;quality&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>agg</span><span class=p>([</span><span class=s1>&#39;mean&#39;</span><span class=p>,</span> <span class=s1>&#39;std&#39;</span><span class=p>,</span> <span class=s1>&#39;count&#39;</span><span class=p>]))</span>
</code></pre></div> <p><strong>Fragen:</strong></p> <p>a) Gibt es Cluster mit höherer durchschnittlicher Qualität?</p> <p>b) Kann man das Clustering für Qualitätsvorhersage nutzen?</p> <hr> <h2 id=zusatzaufgabe-dbscan-ausprobieren>Zusatzaufgabe: DBSCAN ausprobieren<a class=headerlink href=#zusatzaufgabe-dbscan-ausprobieren title="Permanent link">&para;</a></h2> <p>Findet DBSCAN Ausreißer (z.B. besonders gute oder schlechte Weine)?</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.cluster</span><span class=w> </span><span class=kn>import</span> <span class=n>DBSCAN</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=c1># DBSCAN – Parameter müssen angepasst werden!</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=n>dbscan</span> <span class=o>=</span> <span class=n>DBSCAN</span><span class=p>(</span><span class=n>eps</span><span class=o>=</span><span class=mf>2.0</span><span class=p>,</span> <span class=n>min_samples</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=n>labels_db</span> <span class=o>=</span> <span class=n>dbscan</span><span class=o>.</span><span class=n>fit_predict</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>)</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=n>n_clusters</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>labels_db</span><span class=p>))</span> <span class=o>-</span> <span class=p>(</span><span class=mi>1</span> <span class=k>if</span> <span class=o>-</span><span class=mi>1</span> <span class=ow>in</span> <span class=n>labels_db</span> <span class=k>else</span> <span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=n>n_outliers</span> <span class=o>=</span> <span class=p>(</span><span class=n>labels_db</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Gefundene Cluster: </span><span class=si>{</span><span class=n>n_clusters</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Ausreißer: </span><span class=si>{</span><span class=n>n_outliers</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=c1># Ausreißer analysieren</span>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=k>if</span> <span class=n>n_outliers</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>    <span class=n>outliers</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>labels_db</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>]</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Ausreißer-Qualität: </span><span class=si>{</span><span class=n>outliers</span><span class=p>[</span><span class=s1>&#39;quality&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>mean</span><span class=p>()</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2> (vs. </span><span class=si>{</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;quality&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>mean</span><span class=p>()</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2> Durchschnitt)&quot;</span><span class=p>)</span>
</code></pre></div> <div class="admonition tip"> <p class=admonition-title>DBSCAN-Parameter</p> <ul> <li><code>eps</code> zu klein → zu viele Ausreißer</li> <li><code>eps</code> zu groß → alles ein Cluster</li> <li>Experimentiere mit verschiedenen Werten!</li> </ul> </div> <hr> <h2 id=haufige-fehler>Häufige Fehler<a class=headerlink href=#haufige-fehler title="Permanent link">&para;</a></h2> <div class="admonition failure"> <p class=admonition-title>Typische Probleme und Lösungen</p> <p>❌ <strong>Rot- und Weißwein gemischt ohne Kennzeichnung</strong><br> → Füge eine <code>type</code>-Spalte hinzu oder analysiere getrennt</p> <p>❌ <strong>Zu viele korrelierte Features</strong><br> → Entferne hoch korrelierte Features (&gt; 0.8) oder nutze PCA: <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.decomposition</span><span class=w> </span><span class=kn>import</span> <span class=n>PCA</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=n>pca</span> <span class=o>=</span> <span class=n>PCA</span><span class=p>(</span><span class=n>n_components</span><span class=o>=</span><span class=mf>0.95</span><span class=p>)</span>  <span class=c1># 95% Varianz erhalten</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=n>X_reduced</span> <span class=o>=</span> <span class=n>pca</span><span class=o>.</span><span class=n>fit_transform</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>)</span>
</code></pre></div></p> <p>❌ <strong>Silhouette Score falsch interpretiert</strong><br> → Höher ist besser! Werte: - nahe 1 = sehr gute Trennung - nahe 0 = überlappende Cluster - negativ = fehlerhafte Zuordnung</p> <p>❌ <strong>DBSCAN findet nur 1 Cluster oder nur Ausreißer</strong><br> → Parameter anpassen. Nutze k-distance Plot: <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.neighbors</span><span class=w> </span><span class=kn>import</span> <span class=n>NearestNeighbors</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=n>nn</span> <span class=o>=</span> <span class=n>NearestNeighbors</span><span class=p>(</span><span class=n>n_neighbors</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=n>nn</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>)</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=n>distances</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=n>nn</span><span class=o>.</span><span class=n>kneighbors</span><span class=p>(</span><span class=n>X_scaled</span><span class=p>)</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span><span class=n>distances</span><span class=p>[:,</span><span class=o>-</span><span class=mi>1</span><span class=p>]))</span>
</code></pre></div></p> </div> <hr> <h2 id=zusammenfassung>Zusammenfassung<a class=headerlink href=#zusammenfassung title="Permanent link">&para;</a></h2> <div class="admonition success"> <p class=admonition-title>Das hast du gelernt</p> <ul> <li>Feature-Korrelationen analysieren und redundante Features identifizieren</li> <li>Systematischer Vergleich mehrerer Algorithmen</li> <li>Silhouette Score als objektive Metrik</li> <li>DBSCAN zur Ausreißer-Erkennung</li> <li>Clustering-Ergebnisse mit externen Labels validieren</li> </ul> </div> <hr> <h2 id=nachste-schritte>Nächste Schritte<a class=headerlink href=#nachste-schritte title="Permanent link">&para;</a></h2> <p>Sehr gut! Du hast jetzt Erfahrung mit verschiedenen Algorithmen und Datensätzen. Im nächsten Arbeitsblatt bereitest du dich auf das Abschlussprojekt vor – mit einem noch größeren Datensatz.</p> <p>➡️ Weiter zu <a href=../ul-09-musik-clustering/ >UL-09: Musik-Clustering</a></p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Zurück zum Seitenanfang </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.sections", "navigation.top", "navigation.tabs", "search.suggest", "search.highlight", "content.code.copy", "content.tabs.link", "content.progress"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../assets/js/progress.js></script> </body> </html>